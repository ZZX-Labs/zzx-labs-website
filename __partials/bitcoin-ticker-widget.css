/* __partials/bitcoin-ticker-widget.css
   WRAPPER + SHARED PRIMITIVES (drop-in)
   Canonical HUD modes: full | ticker-only | hidden

   FIXES:
   - Your wrapper HTML uses: .btc-slot[data-widget-slot="..."]
     so this CSS MUST target data-widget-slot (and also tolerates legacy data-widget).
   - HUD handle is visible ONLY when HUD is hidden (CSS-driven via :has()).
   - Full-width rules apply to: runtime, bitcoin-ticker, bitrng.
*/

/* ---------- HUD handle ---------- */
.zzx-hud-handle{
  position: sticky;
  top: .35rem;
  z-index: 9999;

  width: 100%;
  margin: .25rem auto;
  pointer-events: none;

  display: none;
  justify-content: center;
}

/* Show ONLY when HUD is hidden */
@supports selector(:has(*)) {
  body:has([data-hud-root][data-hud-state="hidden"]) .zzx-hud-handle{
    display: flex;
  }
}
/* Fallback: if :has() unsupported, keep handle visible so user is never stranded */
@supports not selector(:has(*)) {
  .zzx-hud-handle{ display: flex; }
}

.zzx-hud-handle .zzx-hud-show{
  pointer-events: auto;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .45rem;

  background: #0b0b0b;
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 999px;
  padding: .35rem .7rem;

  color: #c0d674;
  cursor: pointer;

  /* keep local/system; no remote font loads */
  font-family: var(--zzx-font-mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace);
}

.zzx-hud-handle .zzx-hud-show:hover{
  border-color: #e6a42b;
  color: #e6a42b;
}

.zzx-hud-fallback{
  display: none;
  font-size: 12px;
  opacity: .9;
  line-height: 1;
}

/* ---------- HUD root rail ---------- */
.btc-rail{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  align-items:stretch;
  gap:.6rem;
  width:100%;
}

/* When hidden, hide the entire rail */
[data-hud-root][data-hud-state="hidden"]{
  display:none !important;
}

/* Slots */
.btc-slot{
  display:flex;
  flex: 1 1 240px;
  max-width: 360px;
  box-sizing: border-box;

  min-width: 0; /* FIX: prevents flex children (long hashes) from forcing overflow on mobile */
}

/* Full-width slots (supports BOTH conventions) */
.btc-slot[data-widget="bitcoin-ticker"],
.btc-slot[data-widget="bitrng"],
.btc-slot[data-widget="runtime"],
.btc-slot[data-widget-slot="bitcoin-ticker"],
.btc-slot[data-widget-slot="bitrng"],
.btc-slot[data-widget-slot="runtime"]{
  flex: 1 1 100%;
  max-width: 100%;
  justify-content: center;
}


/* ---------- Card primitives ---------- */
.btc-card{
  background:#0b0b0b;
  border:1px solid #2a2a2a;
  border-radius:10px;
  box-shadow:0 6px 18px rgba(0,0,0,.25);
  padding:.55rem .65rem;

  width: 100%;
  max-width: 360px;

  color:#c0d674;
  font-family: var(--zzx-font-mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace);
  box-sizing: border-box;
}

.btc-card__title{
  color:#e6a42b;
  font-size:1rem;
  line-height:1.1;
  margin-bottom:.35rem;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.btc-card__value{
  font-size:1.35rem;
  line-height:1.2;
  margin-bottom:.15rem;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.btc-card__sub{
  font-size:.95rem;
  color:#b7bf9a;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Let full-width cards actually be full-width (supports BOTH conventions) */
.btc-slot[data-widget="runtime"] .btc-card,
.btc-slot[data-widget="bitcoin-ticker"] .btc-card,
.btc-slot[data-widget="bitrng"] .btc-card,
.btc-slot[data-widget-slot="runtime"] .btc-card,
.btc-slot[data-widget-slot="bitcoin-ticker"] .btc-card,
.btc-slot[data-widget-slot="bitrng"] .btc-card{
  max-width: 100% !important;
}

/* ---------- Ticker-only mode ---------- */
/* Hide all slots… */
[data-hud-root][data-hud-state="ticker-only"] .btc-slot{
  display:none !important;
}

/* …but keep ticker slot visible (supports BOTH conventions) */
[data-hud-root][data-hud-state="ticker-only"] .btc-slot[data-widget="bitcoin-ticker"],
[data-hud-root][data-hud-state="ticker-only"] .btc-slot[data-widget-slot="bitcoin-ticker"]{
  display:flex !important;
}

/* …and keep runtime slot visible so you can exit ticker-only (supports BOTH conventions) */
[data-hud-root][data-hud-state="ticker-only"] .btc-slot[data-widget="runtime"],
[data-hud-root][data-hud-state="ticker-only"] .btc-slot[data-widget-slot="runtime"]{
  display:flex !important;
}

