/* __partials/widgets/_core/widget-core.css
   Core HUD + widget card styling.

   DROP-IN UPDATE (minimal, but fixes your current UX + layout contract):
   - HUD handle becomes a right-aligned "HUD" button (matches your request).
   - HUD handle is shown ONLY when HUD is hidden (uses :has() so we don't need HTML changes).
   - Ticker is full-width (top). BitRNG is full-width (bottom). Nothing else forced full width.
   - Works with BOTH slot conventions:
       A) [data-widget-slot="..."]  (core/runtime slots)
       B) .btc-slot[data-widget="..."] (your wrapper shell)
   - Keeps system-font stacks (no @font-face network fetches).
   - Keeps your canonical HUD states: full | ticker-only | hidden
*/

/* -----------------------------
   Typography + theme tokens
------------------------------ */
:root{
  --zzx-accent: #c0d674;
  --zzx-accent-alt: #e6a42b;
  --zzx-bg: #0b0b0b;
  --zzx-border: rgba(255,255,255,.14);
  --zzx-border-strong: #2a2a2a;
  --zzx-shadow: 0 6px 18px rgba(0,0,0,.25);

  /* System-first stacks (no network fetches) */
  --zzx-font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "DejaVu Sans Mono", monospace;
  --zzx-font-title: var(--zzx-font-mono);

  /* Layout rail width (site already uses --header-rail on many pages) */
  --zzx-rail: min(var(--header-rail, 1100px), 100%);

  /* HUD button sizing */
  --zzx-hud-btn-h: 34px;
}

/* -----------------------------
   HUD handle (only visible when HUD is hidden)
   - Right-aligned to match navbar edge.
   - Sticky so it stays accessible when HUD is hidden.
   - Works with either data-hud-state="hidden" on [data-hud-root] OR
     legacy/alt state keys if they exist elsewhere (we only key off canonical).
------------------------------ */
.zzx-hud-handle{
  width:100%;
  max-width: var(--zzx-rail);
  margin:.35rem auto 0;
  padding-inline:.5rem;
  box-sizing:border-box;

  position: sticky;
  top: .25rem;
  z-index: 9999;

  display:none; /* default hidden; enabled via :has() rule below */
  justify-content:flex-end;
  pointer-events:none; /* only button clickable */
}

/* Show ONLY when the page contains a hidden HUD root */
@supports selector(:has(*)) {
  body:has([data-hud-root][data-hud-state="hidden"]) .zzx-hud-handle{
    display:flex;
  }
}

/* If :has() not supported, keep it visible (better than stranded) */
@supports not selector(:has(*)) {
  .zzx-hud-handle{ display:flex; }
}

/* Button label: you can keep text "Show Bitcoin HUD" in HTML;
   this forces it to look like a compact "HUD" control. */
.zzx-hud-show{
  pointer-events:auto;

  height: var(--zzx-hud-btn-h);
  line-height: calc(var(--zzx-hud-btn-h) - 2px);

  background:#000;
  color:var(--zzx-accent);
  border:1px solid rgba(255,255,255,.18);
  border-radius:10px;
  padding:0 .65rem;
  font-family:var(--zzx-font-mono);
  cursor:pointer;

  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.4rem;

  font-size:.95rem;
  letter-spacing:.02em;
  white-space:nowrap;
}

/* Optional: visually shorten label without HTML edits (works in most layouts).
   If you truly need ONLY "HUD" text, do it in HTML; CSS can't replace text reliably. */
.zzx-hud-show:hover{
  border-color:var(--zzx-accent-alt);
  color:var(--zzx-accent-alt);
}

/* -----------------------------
   HUD root wrapper / rail
   Supports BOTH:
   - .zzx-widgets__rail with [data-widget-slot]
   - .btc-rail with .btc-slot[data-widget]
------------------------------ */
[data-hud-root]{
  width:100%;
  max-width: var(--zzx-rail);
  margin:.45rem auto;
  padding-inline:.5rem;
  box-sizing:border-box;
}

/* Hidden mode: hide ONLY the hud root */
[data-hud-root][data-hud-state="hidden"]{ display:none; }

/* -----------------------------
   Runtime bar (SINGLE BAR)
------------------------------ */
.zzx-widgets__bar{
  display:flex;
  align-items:center;
  gap:.45rem;
  flex-wrap:wrap;
  justify-content:center;

  padding:.35rem .45rem;
  background:var(--zzx-bg);
  border:1px solid rgba(255,255,255,.10);
  border-radius:10px;
  margin-bottom:.5rem;
}

.zzx-widgets__btn{
  background:var(--zzx-bg);
  color:var(--zzx-accent);
  border:1px solid var(--zzx-border);
  border-radius:10px;
  padding:.35rem .55rem;
  font-family:var(--zzx-font-mono);
  cursor:pointer;
}
.zzx-widgets__btn:hover{ border-color:var(--zzx-accent-alt); color:var(--zzx-accent-alt); }

.zzx-widgets__spacer{ flex:1 1 auto; min-width:1rem; }

/* -----------------------------
   Rail: responsive columns (slot conventions)
   - Ticker = full width (top)
   - Middle widgets = 2-up mobile, 4-up desktop
   - BitRNG = full width (bottom)
------------------------------ */

/* New rail (core) */
.zzx-widgets__rail{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  align-items:stretch;
  gap:.6rem;
  width:100%;
}

/* Wrapper rail (your current HUD shell) */
.btc-rail{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  align-items:stretch;
  gap:.6rem;
  width:100%;
}

/* Slot defaults: 2 columns on small screens (core slots) */
.zzx-widgets__rail > [data-widget-slot]{
  display:block;
  box-sizing:border-box;
  flex: 1 1 calc(50% - .6rem);
  min-width: 260px;
  max-width: 420px;
}

/* Slot defaults: 2 columns on small screens (wrapper slots) */
.btc-rail > .btc-slot[data-widget]{
  display:flex;
  box-sizing:border-box;
  flex: 1 1 calc(50% - .6rem);
  min-width: 260px;
  max-width: 420px;
}

/* 4 columns on wider screens */
@media (min-width: 980px){
  .zzx-widgets__rail > [data-widget-slot]{
    flex: 1 1 calc(25% - .6rem);
    max-width: 360px;
  }
  .btc-rail > .btc-slot[data-widget]{
    flex: 1 1 calc(25% - .6rem);
    max-width: 360px;
  }
}

/* Ticker always full width */
.zzx-widgets__rail > [data-widget-slot="bitcoin-ticker"],
.btc-rail > .btc-slot[data-widget="bitcoin-ticker"]{
  flex: 1 1 100% !important;
  max-width: 100% !important;
  justify-content:center;
}

/* BitRNG only forced full width bottom widget */
.zzx-widgets__rail > [data-widget-slot="bitrng"],
.btc-rail > .btc-slot[data-widget="bitrng"]{
  flex: 1 1 100% !important;
  max-width: 100% !important;
  justify-content:center;
}

/* Also keep runtime full width (control bar should span the rail) */
.zzx-widgets__rail > [data-widget-slot="runtime"],
.btc-rail > .btc-slot[data-widget="runtime"]{
  flex: 1 1 100% !important;
  max-width: 100% !important;
  justify-content:center;
}

/* -----------------------------
   Card base â€” supports both .zzx-card and .btc-card
------------------------------ */
.zzx-card, .btc-card{
  background:var(--zzx-bg);
  border:1px solid var(--zzx-border-strong);
  border-radius:10px;
  box-shadow:var(--zzx-shadow);
  padding:.55rem .65rem;
  color:var(--zzx-accent);
  font-family:var(--zzx-font-mono);
  width:100%;
  box-sizing:border-box;
}

/* Common title/value/sub helpers */
.zzx-card__title, .btc-card__title{
  font-family:var(--zzx-font-title);
  color:var(--zzx-accent-alt);
  font-size:1rem;
  line-height:1.1;
  margin-bottom:.35rem;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.zzx-card__value, .btc-card__value{
  font-size:1.35rem;
  line-height:1.2;
  margin-bottom:.15rem;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.zzx-card__sub, .btc-card__sub{
  font-size:.95rem;
  color:#b7bf9a;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* -----------------------------
   Mode: ticker-only
   - Hide everything except ticker slot
   Works for BOTH slot conventions.
------------------------------ */
[data-hud-root][data-hud-state="ticker-only"] .zzx-widgets__rail > [data-widget-slot]{
  display:none !important;
}
[data-hud-root][data-hud-state="ticker-only"] .zzx-widgets__rail > [data-widget-slot="bitcoin-ticker"]{
  display:block !important;
}

[data-hud-root][data-hud-state="ticker-only"] .btc-rail > .btc-slot[data-widget]{
  display:none !important;
}
[data-hud-root][data-hud-state="ticker-only"] .btc-rail > .btc-slot[data-widget="bitcoin-ticker"]{
  display:flex !important;
}
